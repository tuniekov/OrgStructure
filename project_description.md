# Анализ проекта OrgStructure

## Общее описание
OrgStructure - это компонент для MODX, предназначенный для управления организационной структурой. Проект построен на основе современного стека технологий:

- **Фронтенд**: Vue 3, PrimeVue, TailwindCSS, PVTables
- **Бэкенд**: MODX, PHP, gtsAPI
- **Сборка**: Vite, PostCSS

## Структура базы данных
Компонент использует следующие таблицы:

1. **osTree** - основная таблица для хранения древовидной структуры организации
   - Поля: id, parent_id, parents_ids, title, class, target_id, menuindex

2. **osOrg** - таблица организаций
   - Поля: id, name, active

3. **osFilial** - таблица филиалов
   - Поля: id, name, active

4. **osDepartment** - таблица отделов
   - Поля: id, name, active

5. **osPost** - таблица должностей
   - Поля: id, name

6. **osEmployee** - таблица сотрудников
   - Поля: id, name, active, user_id, post_id

7. **osAccess** - таблица прав доступа
   - Поля: id, tree_id, group_id, user_id, active

## Архитектура проекта

### Фронтенд
- Использует Vue 3 с Composition API
- Основной компонент - UniTreePanel из библиотеки PVTables
- Стилизация через TailwindCSS
- Сборка через Vite

### Бэкенд
- Основной класс OrgStructure для работы с компонентом
- Интеграция с другими компонентами MODX (gtsShop, getTables, pdoFetch)
- API для работы с деревом организационной структуры

### Система сборки
- Скрипты для сборки и деплоя компонента
- Конфигурация для создания транспортного пакета MODX
- Скрипты для получения токена API и копирования компонента

## Функциональность
Компонент предоставляет:
1. Древовидное представление организационной структуры
2. Управление организациями, филиалами, отделами и сотрудниками
3. Настройку прав доступа к элементам структуры
4. API для интеграции с другими компонентами

## Интеграции
- Интеграция с gtsShop
- Использование pdoFetch для выборки данных
- Использование getTables для работы с таблицами
- Использование PVTables для отображения данных на фронтенде

## Процесс разработки
1. Разработка ведется с использованием npm для управления зависимостями
2. Сборка фронтенда через Vite
3. Обновление конфигурации через скрипты в папке _build
4. Создание транспортного пакета MODX для установки компонента
5. При изменени можно изменять gtsAPI и PVTables
